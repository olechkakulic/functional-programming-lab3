# Лабораторная работа №3

## Использованные алгоритмы интерполяции

---
**Выполнила:** Логинова Ольга Олеговна 
**Группа:** Р3331  
**Преподаватель:** Пенской Александр Владимирович  
**Язык:** Clojure
---


### Задача
Реализовать потоковую интерполяцию с поддержкой нескольких алгоритмов:
- Линейная интерполяция отрезками
- Интерполяция Ньютона

---

## Описание

Программа реализует интерполяцию функций в потоковом режиме с поддержкой линейной интерполяции и интерполяции Ньютона. Программа работает как потоковый процессор данных, принимая входные данные на стандартный ввод и выводя результаты на стандартный вывод.

## Требования

- Java (JDK 8 или выше)
- Leiningen (для сборки и запуска Clojure проектов)

## Использование

### Аргументы командной строки

- `--linear` - включить линейную интерполяцию (обязательно должен быть указан хотя бы один алгоритм)
- `--newton` - включить интерполяцию Ньютона
- `--step <значение>` - шаг дискретизации для выходных данных (по умолчанию: 1.0)
- `-n <число>` или `--n <число>` - количество точек для интерполяции Ньютона (по умолчанию: 4)

### Формат входных данных

Входные данные должны быть в текстовом формате, где каждая строка содержит пару координат (x, y), разделённых пробелами, табуляцией, запятой или точкой с запятой:

```
x y
x y
...
```

Или:

```
x;y
x;y
...
```

### Формат выходных данных

Каждая строка вывода имеет формат:

```
алгоритм: x y
```

где `алгоритм` - это `linear` или `newton`, а `x` и `y` - координаты интерполированной точки.

## Примеры использования

### Пример 1: Линейная интерполяция с шагом 0.7

```bash
lein run --linear --step 0.7
```

**Ожидаемый вывод:**
```
linear: 0 0
linear: 0.7 0.7
linear: 1.4 1.4
linear: 2.1 2.1
linear: 2.8 2.8
```

### Пример 2: Интерполяция Ньютона по 4 точкам с шагом 0.5

```bash
lein run --newton -n 4 --step 0.5
```

**Ожидаемый вывод (примерный):**
```
newton: 0 0
newton: 0.5 0.5
newton: 1 1
newton: 1.5 1.5
newton: 2 2
newton: 2.5 2.5
newton: 3 3
newton: 3.5 3.5
newton: 4 4
newton: 4.5 4.5
newton: 5 5
newton: 5.5 5.5
newton: 6 6
newton: 6.5 6.5
newton: 7 7
newton: 7.5 7.5
newton: 8 8
```

### Пример 3: Оба алгоритма одновременно

```bash
 lein run --linear --newton -n 3 --step 0.5
```

## Потоковый режим работы

Программа работает в потоковом режиме, что означает:

1. Программа ожидает данные на стандартном вводе
2. По мере поступления данных программа обрабатывает их и выводит результаты
3. При получении новой точки программа вычисляет все промежуточные точки интерполяции до этой точки
4. При завершении входного потока (EOF) программа выводит все оставшиеся точки до последней доступной

### Алгоритм работы

Для алгоритмов, работающих с группой точек (например, Ньютон), используется скользящее окно:

- При поступлении новой точки она добавляется в окно
- Старые точки удаляются из окна, если их становится слишком много
- Интерполяция выполняется для точек в центре окна (где результат наиболее точен)
- Первое и последнее окна используются для расчёта большего количества точек


## Особенности реализации

- **Функциональный стиль**: Программа написана в функциональном стиле с использованием неизменяемых структур данных
- **Разделение ответственности**: Ввод/вывод отделён от алгоритмов интерполяции
- **Полиморфизм**: Использованы мультиметоды Clojure для реализации различных алгоритмов интерполяции
- **Потоковая обработка**: Использованы ленивые последовательности и очереди для эффективной обработки данных

## Алгоритмы интерполяции

### Линейная интерполяция

Линейная интерполяция работает с двумя последними точками. Для каждой точки x находится отрезок [x1, x2], такой что x1 ≤ x ≤ x2, и вычисляется значение по формуле:

```
y = y1 + (x - x1) * (y2 - y1) / (x2 - x1)
```

### Интерполяция Ньютона

Интерполяция Ньютона использует полином Ньютона для интерполяции по n точкам. Алгоритм:

1. Выбирает окно из n точек, ближайших к точке интерполяции
2. Строит таблицу разделённых разностей
3. Вычисляет значение полинома Ньютона в заданной точке



